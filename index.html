<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>JavaScript Modularization Journey</title>

        <meta name="description" content="Slides: JavaScript Modularization Journey">
        <meta name="author" content="aoxiaoqiang">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/wx.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section style="margin-top:2%" data-markdown>
                    <script type="text/template">
                        # NodeJS
                        ###### 2018-9

                        <small>
													<a href="#">小强@途虎小程序</a>
                        </small>

                        <iframe frameborder="0" scrolling="0" width="90px" height="22px" src="https://ghbtns.com/github-btn.html?user=aoxiaoqiang&repo=node-share&type=star&count=false">
                        </iframe>
                    </script>
                </section>

                <!-- <section data-markdown>
                    <script type="text/template">
                        <img src="https://aoxiaoqiang.github.io/assets/image/avatar/little_prince.jpg" style="
                            width: 200px;
                            border-radius: 50%;
                        "/>
                        ## 若水之野
                        大前端-小程序开发组

                        <small>途虎养车研发部</small>

                        <small>
                            <a href="http://aoxiaoqiang.github.io">Blog</a> /
                            <a href="https://github.com/aoxiaoqiang">GitHub</a>
                        </small>
                    </script>
                </section> -->

<!-- 目录 --->
                <section data-markdown>
                    <script type="text/template">
                        <img src="attach/node/node_logo.svg" style="width:360px; padding: 0 40px;" />

                        - 什么是Node
                        <!-- .element: class="fragment" -->

                        - Node能做什么(Node的优势和劣势)
                        <!-- .element: class="fragment" -->

                        - Node框架
                        <!-- .element: class="fragment" -->

                        - Node + 微信公众号/小程序
                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- 什么是Node --->
                <section data-markdown>
                    <script type="text/template">
                        ### *什么是Node？*

                        > Node.js® is a JavaScript runtime built on Chrome's V8 JavaScript engine.

                        <p style="text-align: left;">Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。 Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型，使其轻量又高效。</p>
                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- Node介绍 --->
                <section data-markdown>
                    <script type="text/template">
                        ### *Node介绍*

                        ![node](attach/node/node_desc1.png)
                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- Node介绍 --->
                <section data-markdown>
                    <script type="text/template">
                        ### *Node介绍*

                        ![node](attach/node/node_desc2.png)
                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- Node 3M --->
<section data-markdown>
        <script type="text/template">
            ### *Node 3M大法*

            - [nvm](https://github.com/creationix/nvm)(Node Version Manager)
                x.xx.xx  (有不兼容的改变; 保持兼容性的新特性; 保持兼容性与特性不变的前提下改动(如bug修复))

            - [npm](https://npmjs.org/)(node package manager)
                是Node.js附带的包管理器。npm是一个命令行工具，用于从NPM Registry中下载、安装Node.js程序，同时解决依赖问题。npm提高了开发的速度，因为它能够负责第三方Node.js程序的安装与管理。

            - [nrm](https://github.com/Pana/nrm)(NPM registry manager)
                npm 下载源地址管理 npm registry

            <!-- .element: class="fragment" -->
        </script>
    </section>

<!-- node能做什么 -->
                <section data-markdown>
                    <script type="text/template">
                        ### Node能做什么

                        ![node](attach/node/node_tool.jpg)
                        <!-- .element: class="fragment" -->

                        [技能图谱](https://mubu.com/doc/pjx3uBENtg)
                        <!-- .element: class="fragment" -->

                        <!-- + [技能图谱](https://mubu.com/doc/pjx3uBENtg)
                        + [nodejs.org](https://nodejs.org/)
                        + [nodejs.cn](http://nodejs.cn/) -->
                    </script>
                </section>

<!-- Node优势和劣势 -->
                <section data-markdown>
                        <script type="text/template">
                            ### Node优点

                            适合: JSON APIs——构建一个Rest/JSON API服务，Node.js可以充分发挥其非阻塞IO模型以及JavaScript功能支持;
                            <!-- .element: class="fragment" -->

                            + 采用事件驱动、异步编程
                            + Node.js非阻塞模式的IO处理
                            + Node.js轻量高效

                            <!-- .element: class="fragment" -->

                            <!-- + 可靠性低
                            + 高性能
                            + 单线程
                            + 异步事件驱动
                            + 非阻塞式IO
                            + 轻量高效 -->

                            [使用 Node.js 的优势和劣势都有哪些？](https://www.zhihu.com/question/19653241)
                            <!-- .element: class="fragment" -->
                        </script>
                    </section>

<!-- Node优势和劣势 -->
                <section data-markdown>
                    <script type="text/template">
                        ### Node缺点

                        不适合: CPU使用率较重、IO使用率较轻的应用——如视频编码、人工智能等
                        <!-- .element: class="fragment" -->

                        + 可靠性低
                        + 单进程，单线程，只支持单核CPU，不能充分的利用多核CPU服务器。一旦这个进程崩掉，那么整个web服务就崩掉了。

                        <!-- .element: class="fragment" -->

                        其它类似的语言和开发环境: Python/Java/Ruby/PHP
                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- node web -->
                <section data-markdown>
                    <script type="text/template">
                        通过Node创建一个web服务

                        ```javascript
                        const http = require('http');

                        const hostname = '127.0.0.1';
                        const port = 3000;

                        const server = http.createServer((req, res) => {
                            res.statusCode = 200;
                            res.setHeader('Content-Type', 'text/plain');
                            res.end('Hello World\n');
                        });

                        server.listen(port, hostname, () => {
                            console.log(`Server running at http://${hostname}:${port}/`);
                        });
                        ```
                    </script>
                </section>

<!-- express server -->
                <section data-markdown>
                    <script type="text/template">
                        ### express server

                        ```javascript
                        // express 创建 web server
                        var express = require('express');
                        var app = express();

                        // 静态服务中间件
                        app.use(express.static('public'));

                        app.get('/', function (req, res) {
                            res.send('Hello World!');
                        });

                        app.listen(3000, function () {
                            console.log('Example app listening on port 3000!');
                        });
                        ```

                        <p style="text-align: left;">
                            [Express中间件](http://expressjs.com/zh-cn/guide/using-middleware.html), 中间件其实就是一个函数。它够访问请求对象 (req)、响应对象 (res) 以及应用程序的请求/响应循环中的下一个中间件函数(next)。
                        </p>

                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- Koa server --->
                <section data-markdown>
                    <script type="text/template">
                        ### Koa server

                        > next generation web framework for node.js;

                        Koa -- 基于 Node.js 平台的下一代 web 开发框架;

                        ```javascript
                        // Koa创建web server
                        const Koa = require('koa');
                        const app = new Koa();

                        app.use(async ctx => {
                            ctx.body = 'Hello World';
                        });

                        app.listen(3000);
                        ```

                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- Koa server --->
                <section data-markdown>
                    <script type="text/template">
                        ### 更多node框架

                        + Exrepss
                        + Koa
                        + Egg.js
                        + Hapi
                        + Sail.js
                        + ...

                        [link](https://91pug.com/2018/04/03/4-3-1/)
                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- 微信公众号 --->
                <section data-markdown>
                    <script type="text/template">
                        ### 微信公众号/小程序

                        ```json
                        {
                            "appID": "",
                            "appsecret": "1fa820604fa721a7a24f47c75219852c"
                        }
                        ```
                        <!-- .element: class="fragment" -->

                        + [微信公众平台](https://mp.weixin.qq.com)
                        + [微信公众平台接口测试帐号申请](https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login&token=&lang=zh_CN)
                    </script>
                </section>

<!-- 微信公众号开发步骤 --->
                <section data-markdown>
                    <script type="text/template">
                        ### 微信公众号开发过程

                        1. 填写服务器配置;
                        2. 验证消息的确来自微信服务器;
                        3. 依据接口文档实现业务逻辑;

                        <!-- .element: class="fragment" -->


                        [ngrok](https://ngrok.com/)
                        <!-- .element: class="fragment" -->

                        [微信公众平台接口调试工具](https://mp.weixin.qq.com/debug/)
                        <!-- .element: class="fragment" -->
                    </script>
                </section>

<!-- 微信小程序客服功能 --->
                <section data-markdown>
                    <script type="text/template">
                        ### 微信小程序客服功能

                        + 填写消息推送配置;
                        + 接口调用;

                        [小程序客服API](https://developers.weixin.qq.com/miniprogram/dev/api/custommsg/receive.html)
                        <!-- .element: class="fragment" -->

                        [客服功能使用指南](https://developers.weixin.qq.com/miniprogram/introduction/custom.html)
                        <!-- .element: class="fragment" -->
                    </script>
                </section>
            </div>
        </div>

        <pre style="display:none"><code> force highlight.js work </code></pre>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

        </script>

        <script type="text/javascript">
            function codeEditor(){
                var nodes = document.querySelectorAll("code");
                for (var i = 0; i < nodes.length; i++) {
                    nodes[i].setAttribute("contenteditable", '');
                }
                console.log('code editable now.');
            }
            window.codeEditor = codeEditor;

            document.addEventListener('DOMContentLoaded', function(){
                setTimeout(function(){
                    codeEditor();
                },1000)
            })
        </script>
    </body>
</html>
